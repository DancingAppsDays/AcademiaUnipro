<!-- checkout-success.component.html -->
<div class="success-container" @fadeInUp>
    <div class="container py-5">
      <div class="success-card">
        <div class="success-icon">
          <i class="bi bi-check-circle-fill"></i>
        </div>
        
        <h1 class="mt-4">¡Compra exitosa!</h1>
        
        <div class="order-info" *ngIf="purchaseId">
          <div class="order-badge">Pedido #{{ purchaseId }}</div>
        </div>
        
      
<div class="course-info mt-4" *ngIf="course">
  <h2>{{ course.title }}</h2>
  <p>{{ course.subtitle }}</p>
  
  <!-- Modified course-details section with instance information -->
  <div class="course-details" *ngIf="selectedDate">
    <div class="detail-item">
      <i class="bi bi-calendar2-check"></i>
      <div>
        <strong>Fecha del curso</strong>
        <p>{{ selectedDate | date:'fullDate':'':'es' }}</p>
        
        <!-- Show status badges based on enrollment status -->
        <div class="enrollment-status" *ngIf="courseInstance">
          <span class="status-badge" [ngClass]="{'confirmed': enrollmentConfirmed}">
            <i class="bi" [ngClass]="enrollmentConfirmed ? 'bi-check-circle' : 'bi-exclamation-triangle'"></i>
            {{ enrollmentConfirmed ? 'Confirmado' : 'Pendiente de confirmación' }}
          </span>
          
          <span class="seats-count" *ngIf="courseInstance.capacity && courseInstance.enrolledCount">
            {{ courseInstance.enrolledCount }}/{{ courseInstance.capacity }} participantes inscritos
          </span>
        </div>
      </div>
    </div>
    
    <div class="detail-item">
      <i class="bi bi-clock"></i>
      <div>
        <strong>Duración</strong>
        <p>{{ course.duration }}</p>
      </div>
    </div>
    
    <div class="detail-item">
      <i class="bi bi-person-badge"></i>
      <div>
        <strong>Instructor</strong>
        <p>{{ getInstructorName() }}</p>
      </div>
    </div>
    
    <!-- Add location if available in course instance -->
    <div class="detail-item" *ngIf="courseInstance?.location">
      <i class="bi bi-geo-alt"></i>
      <div>
        <strong>Ubicación</strong>
        <p>A través de Zoom</p>
      </div>
    </div>
    
    <!-- Add meeting URL if available -->
    <div class="detail-item" *ngIf="courseInstance?.meetingUrl">
      <i class="bi bi-camera-video"></i>
      <div>
        <strong>Enlace de reunión</strong>
        <p><a [href]="courseInstance?.meetingUrl" target="_blank">{{ courseInstance?.meetingUrl }}</a></p>
      </div>
    </div>


      <!-- Add WhatsApp group link if available -->
      <div class="detail-item" *ngIf="courseInstance?.whatsappGroup">
        <i class="bi bi-whatsapp"></i>
        <div>
          <strong>Grupo de WhatsApp</strong>
          <p><a [href]="courseInstance?.whatsappGroup" target="_blank" class="whatsapp-link">Unirse al grupo <i class="bi bi-box-arrow-up-right"></i></a></p>
        </div>
      </div>



  </div>
</div>
        <div class="email-info mt-4" *ngIf="email">
          <div class="email-badge">
            <i class="bi bi-envelope-check"></i>
          </div>
          <div>
            <h3>Confirmación enviada por correo</h3>
            <p>Hemos enviado todos los detalles a <strong>{{ email }}</strong>.</p>
            <p>Por favor, revisa tu bandeja de entrada (y carpeta de spam si es necesario).</p>
          </div>
        </div>
        
        <div class="next-steps mt-5">
          <h3>Próximos pasos</h3>
          <ul>
            <li>
              <div class="step-icon"><span>1</span></div>
              <div class="step-content">
                <strong>Revisa tu correo electrónico</strong>
                <p>Encontrarás todos los detalles de acceso al curso.</p>
              </div>
            </li>
            <li>
              <div class="step-icon"><span>2</span></div>
              <div class="step-content">
                <strong>Prepara los materiales necesarios</strong>
                <p>Asegúrate de tener todo lo necesario para participar.</p>
                <p>Es recomendable computadora o laptop con buena conexión a Internet.</p>
              </div>
            </li>
            <li>
              <div class="step-icon"><span>3</span></div>
              <div class="step-content">
                <strong>Conéctate puntualmente</strong>
                <p>Ingresa 10 minutos antes para verificar tu conexión.</p>
              </div>
            </li>
          </ul>
        </div>
        
        <div class="action-buttons mt-5">
          <button class="btn btn-primary me-3" (click)="addToCalendar()" *ngIf="course && selectedDate">
            <i class="bi bi-calendar-plus me-2"></i>
            Agregar a Google Calendar
          </button>
          
          <button class="btn btn-outline-primary me-3" (click)="downloadConfirmation()">
            <i class="bi bi-file-earmark-pdf me-2"></i>
            Descargar confirmación
          </button>
          
          <button class="btn btn-outline-secondary" routerLink="/dashboard">
            <i class="bi bi-person-circle me-2"></i>
            Ver mis cursos
          </button>
        </div>
        
        <div class="additional-courses mt-5">
          <h3>¿Busca capacitación complementaria?</h3>
          <p>Explore nuestra oferta completa de cursos para fortalecer sus conocimientos.</p>
          <button class="btn btn-primary" routerLink="/">
            Ver más cursos
          </button>
        </div>
      </div>
    </div>
  </div>